<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Information for Package Developers · Juno Documentation</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/highlightjs/default.css" rel="stylesheet" type="text/css"/><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><a href="../index.html"><img class="logo" src="../assets/logo.png" alt="Juno Documentation logo"/></a><h1>Juno Documentation</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" action="../search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../index.html">Home</a></li><li><span class="toctext">Manual</span><ul><li><a class="toctext" href="installation.html">Installation Instructions</a></li><li><a class="toctext" href="basic_usage.html">Basic Usage</a></li><li><a class="toctext" href="faq.html">FAQ</a></li><li><a class="toctext" href="juno_frontend.html">The Juno.jl Front-End</a></li><li class="current"><a class="toctext" href="info_developer.html">Information for Package Developers</a><ul class="internal"><li><a class="toctext" href="#Custom-Type-Printing-1">Custom Type Printing</a></li></ul></li><li><a class="toctext" href="settings.html">Settings</a></li></ul></li><li><span class="toctext">Developer Documentation</span><ul><li><a class="toctext" href="../devdocs/contributor_guide.html">Contributor Guide</a></li><li><a class="toctext" href="../devdocs/dev_install.html">Developer Installation Instructions</a></li><li><a class="toctext" href="../devdocs/package_info.html">Juno Package Information</a></li><li><a class="toctext" href="../devdocs/juno_ci.html">Juno&#39;s CI</a></li><li><a class="toctext" href="../devdocs/communication.html">Communication</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Manual</li><li><a href="info_developer.html">Information for Package Developers</a></li></ul><a class="edit-page" href="https://github.com/JunoLab/JunoDocs.jl/tree/9787bd03de20812fed7a2c8b1b7da78d76b9e5e8/docs/src/man/info_developer.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Information for Package Developers</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Information-for-Package-Developers-1" href="#Information-for-Package-Developers-1">Information for Package Developers</a></h1><p>In this page we giving some information that can help Package developers interact smoothly with Juno, and use it to their advantage for e.g. displaying Types, graphics etc.</p><h2><a class="nav-anchor" id="Custom-Type-Printing-1" href="#Custom-Type-Printing-1">Custom Type Printing</a></h2><p>As was mentioned in the <a href="/man/basic_usage">Basic Usage</a> page, you can enhance the way user-defined types are printed in the Juno console (or similarly during inline evaluation). <em>Note</em>: The difference between printing in Juno and in the REPL is discussed in the follow-up section.</p><p>This enhancing is done by extending the <code>Juno.render(::MyType)</code> function to match your type.</p><pre><code class="language-none">Juno.render
Juno.@render</code></pre><p>As an example, we will use the type</p><pre><code class="language-julia">struct System{T}
  d::Int
  state::Vector{T}
  vel::Vector{T}
end

s = System(2, rand(2), rand(2))</code></pre><p>which, by default is displayed in Juno using a <code>Juno.Tree</code> structure, with the &quot;head&quot; displaying the Type information, and expandable arrows for all the fields that are expandable, meaning, the head itself, as well as the 2nd and 3rd fields, which are vectors.</p><p>The most basic way to change this, is to simply add some custom strings to <code>Juno.render</code> like:</p><pre><code class="language-julia">import Juno.render
function Juno.render(i::Juno.Inline, s::System)
  str = &quot;$(s.d)-dimensional system&quot;
  Juno.render(i, Text(str))
end</code></pre><p>and then, this will change the way Juno displays the system to simply: &quot;2-dimensional system&quot;. It is important to have the first argument <code>i::Juno.Inline</code> in your definition, instead of some <code>println()</code> function call, because this ensures that the information is shown correctly either at the console or on inline evaluation (with e.g. Shift+Enter at the editor).</p><p><code>Juno.Inline</code> is one of the predefined rendering contexts defined in Juno:</p><pre><code class="language-none">Juno.Inline
Juno.Clipboard
Juno.PlotPane</code></pre><p>However, with this approach you lose the cool interactivity of Juno allowing you to expand fields as you like. Let&#39;s say that you would like to keep the Juno display format, but simply change the message displayed on the &quot;head&quot;, because for example you might not want the type information to be displayed. This is done by changing the &quot;head&quot; of the <code>Juno.Tree</code> that is created by default:</p><pre><code class="language-julia">function Juno.render(i::Juno.Inline, s::System)
  t = Juno.render(i, Juno.defaultrepr(s))
  t[:head] = Juno.render(i, Text(&quot;$(length(s.state))-dimensional system&quot;))
  t
end</code></pre><pre><code class="language-none">Juno.defaultrepr</code></pre><p>But now you notice that you display the dimension information both at the &quot;head&quot; of the tree, but also on one of the &quot;children&quot;, since by default all fields of a Type are printed. Well, thankfully, it is really easy to remove a children from display:</p><pre><code class="language-julia">function Juno.render(i::Juno.Inline, s::System)
  t = Juno.render(i, Juno.defaultrepr(s))
  t[:head] = Juno.render(i, Text(&quot;$(length(s.state))-dimensional system&quot;))
  t[:children ] = t[:children][2:3]
  return t
end</code></pre><p><img src="../assets/custom_rendering.png" alt="custom rendering"/></p><p>Here, each entry in the vector <code>t[:children]</code> is one displayed entity of the <code>Juno.Tree</code>. By removing the first entry (which is the first field of our Type) we are now displaying only the fields <code>state</code> and <code>vel</code>. Of course, it goes without saying that you can completely change how the fields are displayed (e.g. change the <code>vel</code> display to <code>velocity</code>) by going deeper into <code>t[:children]</code>.</p><p>It&#39;s also possible to display arbitrary HTML in results: There are <code>render</code> methods for all the HTML primitives defined in <a href="https://github.com/JunoLab/Hiccup.jl">Hiccup.jl</a> as well as for certain higher-level elements from Juno.jl or even Base</p><pre><code class="language-none">Juno.Tree
Juno.LazyTree
Juno.SubTree
Juno.Link
Juno.Table
Juno.Row
Base.Text</code></pre><p>Should you wish to render something in the <code>PlotPane</code>, you can get it&#39;s dimensions via</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Juno.plotsize" href="#Juno.plotsize"><code>Juno.plotsize</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">plotsize()</code></pre><p>Get the size of Juno&#39;s plot pane in <code>px</code>. Does not yet have a fallback for other environments.</p></div><a class="source-link" target="_blank" href="https://github.com/JunoLab/Juno.jl/tree/18b8b190c7d55f61017a4bf1c527d15d615d87a2/src/frontend.jl#L32-L37">source</a><br/></section><h3><a class="nav-anchor" id="Printing-in-REPL-vs.-Juno-1" href="#Printing-in-REPL-vs.-Juno-1">Printing in REPL vs. Juno</a></h3><p>If a method for <code>Base.show</code> is present, but <em>no</em> method exists for <code>Juno.render</code>, then Juno will fall back to <code>show</code>. If both exist however, you can get the awesome display capabilities of Juno, while still having custom support for your Types in the REPL. For example, by adding the function:</p><pre><code class="language-julia">import Base.show
function Base.show(io::IO, s::System)
  println(io, &quot;$(length(s.state))-dimensional system&quot;)
  println(io, &quot;state: $(s.state)&quot;)
  println(io, &quot;velocity $(s.vel)&quot;)
end</code></pre><p>you can support custom printing at the REPL as well, without ruining the Juno printing.</p><h3><a class="nav-anchor" id="Conditionally-defining-Juno-specific-render-methods-1" href="#Conditionally-defining-Juno-specific-render-methods-1">Conditionally defining Juno-specific render methods</a></h3><p>It is possible to use <a href="https://github.com/MikeInnes/Requires.jl">Requires.jl</a> to circumvent having a hard dependency on Juno.jl for rendering:</p><pre><code class="language-julia">@require Juno begin
  using Juno
  function Juno.render(i::Juno.Inline, s::System)
    t = Juno.render(i, Juno.defaultrepr(s))
    t[:head] = Juno.render(i, Text(&quot;$(length(s.state))-dimensional system&quot;))
    t[:children] = t[:children][2:3]
    return t
  end
end</code></pre><footer><hr/><a class="previous" href="juno_frontend.html"><span class="direction">Previous</span><span class="title">The Juno.jl Front-End</span></a><a class="next" href="settings.html"><span class="direction">Next</span><span class="title">Settings</span></a></footer></article></body></html>
